{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/room-card.tsx"],"sourcesContent":["\"use client\"\n\nimport { Droplets, ThermometerSun, Zap } from \"lucide-react\"\nimport type { Room } from \"@/lib/api\"\n\ninterface RoomCardProps {\n  room: Room\n  onClick: () => void\n}\n\nexport default function RoomCard({ room, onClick }: RoomCardProps) {\n  const isActive = room.inClass\n\n  const tempText =\n    room.currentTemperature != null ? `${room.currentTemperature.toFixed(1)}°C` : \"--\"\n\n  const luxText =\n    room.currentIlluminance != null ? `${room.currentIlluminance.toFixed(0)} lx` : \"--\"\n\n  const energyText =\n    room.currentEnergyKWh != null ? `${room.currentEnergyKWh.toFixed(2)} kWh` : \"--\"\n\n  return (\n    <button\n      onClick={onClick}\n      className=\"bg-white rounded-2xl p-5 w-full text-left hover:shadow-md transition-all border border-gray-100 hover:border-green-200\"\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className={`w-2.5 h-2.5 rounded-full ${\n              isActive ? \"bg-green-500 shadow-sm shadow-green-500/50\" : \"bg-gray-300\"\n            }`}\n          />\n          <div>\n            <h3 className=\"font-bold text-gray-900 text-lg\">{room.name}</h3>\n            <p className=\"text-xs text-gray-500 mt-0.5\">\n              {room.building} • {room.description ?? \"\"}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {isActive ? (\n        <div className=\"px-3 py-2 bg-green-50 rounded-lg mb-4\">\n          <p className=\"text-xs font-medium text-green-700\">In class now</p>\n          <p className=\"text-xs text-green-600 mt-0.5 truncate\">\n            {room.courseName ?? \"Current class\"}{\" \"}\n            {room.lecturerName ? `• ${room.lecturerName}` : \"\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"px-3 py-2 bg-gray-50 rounded-lg mb-4\">\n          <p className=\"text-xs font-medium text-gray-700\">No active class</p>\n          <p className=\"text-xs text-gray-600 mt-0.5\">\n            Next class at {room.nextClass ?? \"--\"}\n          </p>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-3 gap-3\">\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-1\">\n            <ThermometerSun size={18} className=\"text-gray-400\" />\n          </div>\n          <p className=\"text-xs font-semibold text-gray-900\">{tempText}</p>\n          <p className=\"text-[11px] text-gray-500\">Temp</p>\n        </div>\n\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-1\">\n            <Droplets size={18} className=\"text-gray-400\" />\n          </div>\n          <p className=\"text-xs font-semibold text-gray-900\">{luxText}</p>\n          <p className=\"text-[11px] text-gray-500\">Lux</p>\n        </div>\n\n        <div className=\"text-center\">\n          <div className=\"flex justify-center mb-1\">\n            <Zap size={18} className=\"text-gray-400\" />\n          </div>\n          <p className=\"text-xs font-semibold text-gray-900\">{energyText}</p>\n          <p className=\"text-[11px] text-gray-500\">kWh</p>\n        </div>\n      </div>\n    </button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAFA;;;AAUe,SAAS,SAAS,EAAE,IAAI,EAAE,OAAO,EAAiB;IAC/D,MAAM,WAAW,KAAK,OAAO;IAE7B,MAAM,WACJ,KAAK,kBAAkB,IAAI,OAAO,GAAG,KAAK,kBAAkB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,GAAG;IAEhF,MAAM,UACJ,KAAK,kBAAkB,IAAI,OAAO,GAAG,KAAK,kBAAkB,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,GAAG;IAEjF,MAAM,aACJ,KAAK,gBAAgB,IAAI,OAAO,GAAG,KAAK,gBAAgB,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG;IAE9E,qBACE,8OAAC;QACC,SAAS;QACT,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAW,CAAC,yBAAyB,EACnC,WAAW,+CAA+C,eAC1D;;;;;;sCAEJ,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAmC,KAAK,IAAI;;;;;;8CAC1D,8OAAC;oCAAE,WAAU;;wCACV,KAAK,QAAQ;wCAAC;wCAAI,KAAK,WAAW,IAAI;;;;;;;;;;;;;;;;;;;;;;;;YAM9C,yBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;;4BACV,KAAK,UAAU,IAAI;4BAAiB;4BACpC,KAAK,YAAY,GAAG,CAAC,EAAE,EAAE,KAAK,YAAY,EAAE,GAAG;;;;;;;;;;;;qCAIpD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAoC;;;;;;kCACjD,8OAAC;wBAAE,WAAU;;4BAA+B;4BAC3B,KAAK,SAAS,IAAI;;;;;;;;;;;;;0BAKvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,4OAAc;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAEtC,8OAAC;gCAAE,WAAU;0CAAuC;;;;;;0CACpD,8OAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;kCAG3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,sNAAQ;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAEhC,8OAAC;gCAAE,WAAU;0CAAuC;;;;;;0CACpD,8OAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;kCAG3C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,uMAAG;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAE3B,8OAAC;gCAAE,WAAU;0CAAuC;;;;;;0CACpD,8OAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;;;;;;;;;;;;;AAKnD"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/detail-tabs/metrics-tab.tsx"],"sourcesContent":["\"use client\"\n\nimport { ThermometerSun, Sun } from \"lucide-react\"\nimport type { Room } from \"@/lib/api\"\n\ninterface MetricsTabProps {\n  room: Room\n}\n\nexport default function MetricsTab({ room }: MetricsTabProps) {\n  const currentTemp = room.currentTemperature ?? null\n  const targetTemp = room.targetTemperature ?? null\n\n  const currentLux = room.currentIlluminance ?? null\n  const targetLux = room.targetLux ?? null\n\n  const tempDiff =\n    currentTemp != null && targetTemp != null ? currentTemp - targetTemp : null\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Temperature card */}\n      <div className=\"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm\">\n        <div className=\"flex items-center gap-3 mb-5\">\n          <div className=\"w-10 h-10 rounded-xl bg-orange-50 flex items-center justify-center\">\n            <ThermometerSun size={20} className=\"text-orange-600\" />\n          </div>\n          <h3 className=\"font-semibold text-gray-900\">Temperature</h3>\n        </div>\n\n        <div className=\"flex items-end justify-between mb-4\">\n          <div>\n            <p className=\"text-sm text-gray-600 mb-1\">Current</p>\n            <p className=\"text-4xl font-bold text-gray-900\">\n              {currentTemp != null ? currentTemp.toFixed(1) : \"--\"}\n              <span className=\"text-2xl\">°C</span>\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-gray-600 mb-1\">Target</p>\n            <p className=\"text-3xl font-bold text-green-600\">\n              {targetTemp != null ? targetTemp.toFixed(1) : \"--\"}\n              <span className=\"text-xl\">°C</span>\n            </p>\n          </div>\n        </div>\n\n        <p className=\"text-sm text-gray-600\">\n          {tempDiff == null\n            ? \"No comparison available\"\n            : tempDiff > 0\n            ? `${tempDiff.toFixed(1)}°C above target`\n            : tempDiff < 0\n            ? `${Math.abs(tempDiff).toFixed(1)}°C below target`\n            : \"At target temperature\"}\n        </p>\n      </div>\n\n      {/* Illuminance card */}\n      <div className=\"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm\">\n        <div className=\"flex items-center gap-3 mb-5\">\n          <div className=\"w-10 h-10 rounded-xl bg-yellow-50 flex items-center justify-center\">\n            <Sun size={20} className=\"text-yellow-600\" />\n          </div>\n          <h3 className=\"font-semibold text-gray-900\">Illuminance</h3>\n        </div>\n\n        <div className=\"flex items-end justify-between mb-4\">\n          <div>\n            <p className=\"text-sm text-gray-600 mb-1\">Current</p>\n            <p className=\"text-3xl font-bold text-gray-900\">\n              {currentLux != null ? currentLux.toFixed(0) : \"--\"}\n              <span className=\"text-lg\"> lux</span>\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-gray-600 mb-1\">Target</p>\n            <p className=\"text-2xl font-bold text-green-600\">\n              {targetLux != null ? targetLux.toFixed(0) : \"--\"}\n              <span className=\"text-lg\"> lux</span>\n            </p>\n          </div>\n        </div>\n\n        {currentLux != null && targetLux != null && (\n          <div\n            className={`inline-block px-3 py-1.5 rounded-lg text-xs font-medium ${\n              currentLux >= targetLux\n                ? \"bg-green-50 text-green-700\"\n                : \"bg-amber-50 text-amber-700\"\n            }`}\n          >\n            {currentLux >= targetLux ? \"Comfortable\" : \"Below target\"}\n          </div>\n        )}\n\n        {(currentLux == null || targetLux == null) && (\n          <p className=\"text-xs text-gray-400\">No lux target configured</p>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AASe,SAAS,WAAW,EAAE,IAAI,EAAmB;IAC1D,MAAM,cAAc,KAAK,kBAAkB,IAAI;IAC/C,MAAM,aAAa,KAAK,iBAAiB,IAAI;IAE7C,MAAM,aAAa,KAAK,kBAAkB,IAAI;IAC9C,MAAM,YAAY,KAAK,SAAS,IAAI;IAEpC,MAAM,WACJ,eAAe,QAAQ,cAAc,OAAO,cAAc,aAAa;IAEzE,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,4OAAc;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAEtC,8OAAC;gCAAG,WAAU;0CAA8B;;;;;;;;;;;;kCAG9C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;;4CACV,eAAe,OAAO,YAAY,OAAO,CAAC,KAAK;0DAChD,8OAAC;gDAAK,WAAU;0DAAW;;;;;;;;;;;;;;;;;;0CAG/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;;4CACV,cAAc,OAAO,WAAW,OAAO,CAAC,KAAK;0DAC9C,8OAAC;gDAAK,WAAU;0DAAU;;;;;;;;;;;;;;;;;;;;;;;;kCAKhC,8OAAC;wBAAE,WAAU;kCACV,YAAY,OACT,4BACA,WAAW,IACX,GAAG,SAAS,OAAO,CAAC,GAAG,eAAe,CAAC,GACvC,WAAW,IACX,GAAG,KAAK,GAAG,CAAC,UAAU,OAAO,CAAC,GAAG,eAAe,CAAC,GACjD;;;;;;;;;;;;0BAKR,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,uMAAG;oCAAC,MAAM;oCAAI,WAAU;;;;;;;;;;;0CAE3B,8OAAC;gCAAG,WAAU;0CAA8B;;;;;;;;;;;;kCAG9C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;;4CACV,cAAc,OAAO,WAAW,OAAO,CAAC,KAAK;0DAC9C,8OAAC;gDAAK,WAAU;0DAAU;;;;;;;;;;;;;;;;;;0CAG9B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;;4CACV,aAAa,OAAO,UAAU,OAAO,CAAC,KAAK;0DAC5C,8OAAC;gDAAK,WAAU;0DAAU;;;;;;;;;;;;;;;;;;;;;;;;oBAK/B,cAAc,QAAQ,aAAa,sBAClC,8OAAC;wBACC,WAAW,CAAC,wDAAwD,EAClE,cAAc,YACV,+BACA,8BACJ;kCAED,cAAc,YAAY,gBAAgB;;;;;;oBAI9C,CAAC,cAAc,QAAQ,aAAa,IAAI,mBACvC,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAK/C"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/lib/api.ts"],"sourcesContent":["// lib/api.ts\n\n// ---------- Types ----------\n\nexport type Room = {\n  id: string;\n  name: string;\n  building: string;\n  floor: string;\n  inClass: boolean;\n\n  description?: string;\n  courseName?: string;\n  lecturerName?: string;\n  nextClass?: string;\n\n  currentTemperature?: number;\n  targetTemperature?: number;\n  currentIlluminance?: number;\n  targetLux?: number;\n  currentEnergyKWh?: number;\n};\n\nexport type Schedule = {\n  id: string;\n  roomId: string;\n  roomName: string;\n  courseName: string;\n  lecturer: string;\n  weekdays: string[];\n  startTime: string;\n  endTime: string;\n  // NEW: Thêm 2 trường hiệu lực\n  effectiveFrom?: string; // Format YYYY-MM-DD\n  effectiveTo?: string;   // Format YYYY-MM-DD\n  enabled?: boolean;\n};\n\nexport type Device = {\n  id: string;\n  name: string;\n  type: string;      // \"ac\" | \"light\" | \"sensor\" | \"energy\" | ...\n  roomId: string;\n  roomName: string;\n  status: string;    // \"online\" | \"offline\" | ...\n};\n\nexport type LightState = {\n  roomId: string;\n  deviceId: string;\n  powerState: boolean;\n  brightness: number;\n\n  overrideActive: boolean;\n  overrideExpiresOnUtc?: string | null;\n  overrideExpiresOnLocal?: string | null;\n  overrideExpiresOnLocalFormatted?: string | null;\n\n  controlMode?: \"manual-override\" | \"auto-schedule\";\n};\n\nexport type AcState = {\n  roomId: string;\n  deviceId: string;\n\n  powerState: boolean;\n  mode?: string | null;\n  fanSpeed?: string | null;\n  targetTemperature?: number | null;\n  currentTemperature?: number | null;\n\n  overrideActive: boolean;\n  overrideExpiresOnUtc?: string | null;\n  overrideExpiresOnLocal?: string | null;\n  overrideExpiresOnLocalFormatted?: string | null;\n\n  lastUpdatedBy?: string | null;\n  controlMode?: \"manual-override\" | \"auto-schedule\";\n};\n\n\n// ---------- Constants (API base & keys) ----------\n\nconst BASE_URL =\n  \"https://greentwiniotcentraltrigger-ezgmgugyb9fkfwem.japaneast-01.azurewebsites.net/api\";\n\n// --- ROOM KEYS ---\nconst ROOMS_KEY =\n  \"XcGh9Rjnkz-NiNrgK6_qD4_slZugmc38Qob2svJAcFEJAzFuoBUalg==\";\n\nconst DEVICES_KEY =\n  \"uKQLG3SulECzSU_jJPLsNBoVPG889Qy5IaaxNmiJ5G9QAzFuPH_SrQ==\";\n\n// --- SCHEDULE KEYS (TODO: Hãy điền key thật từ Azure Portal vào đây) ---\nconst SCHEDULES_KEY = \"eSCCmJ4DKYgcmQ0YPab8aDMJ5pWuSJQLO7-n3PnV2i5AAzFuSIAbLg==\"; \nconst CREATE_SCHED_KEY = \"OnmL436GYbEjy9MQ9CCxvK3Bhb0vRmC7_aDn8vYHuvBBAzFuK1NCMw==\"; \nconst DEL_SCHED_KEY = \"Z7O9oOwF5F0YLXg46BvQ_SsVZyjPyVMZqIirU8gsFZhGAzFu0IKyig==\"; \n\n// --- CONTROL KEYS ---\nconst AC_CONTROL_KEY =\n  \"bQAT_PQdIK8_JdHjU6tb1XvNt6-NQ77MnXYtMztVqdCYAzFuGFUySQ==\"; \n\nconst AC_STATE_KEY = \"8d-Vxdj_SdNoek78nrbj3k8s1UWfbKXwt27XjEZxyp7PAzFucjwhVg==\";\n\nconst LIGHT_CONTROL_KEY =\n  \"s8nazlhbZ6i5h2WAj2FzPkj0p-H1NtkkrZLHT_h6RAKzAzFunXpung==\";\n\nconst LIGHT_STATE_KEY =\n  \"Mk8ouqhlOoqhCxYnIgxF3aVleuQ2TBujU-f-bpG_p1GDAzFuZq9lFA==\";\n\n// ---------- API calls ----------\n\n// 1. Lấy danh sách phòng\nexport async function getRooms(): Promise<Room[]> {\n  const res = await fetch(`${BASE_URL}/rooms?code=${ROOMS_KEY}`, {\n    cache: \"no-store\",\n  });\n\n  if (!res.ok) {\n    console.error(\"Failed to load rooms\", res.status, await res.text());\n    throw new Error(\"Failed to load rooms\");\n  }\n\n  return res.json();\n}\n\n// 2. Lấy danh sách lịch học (API Thật)\nexport async function getSchedules(): Promise<Schedule[]> {\n  // Gọi endpoint GetSchedules\n  const res = await fetch(`${BASE_URL}/schedules?code=${SCHEDULES_KEY}`, { \n    cache: \"no-store\" \n  });\n\n  if (!res.ok) {\n    console.error(\"Failed load schedules\", res.status);\n    return []; // Trả về rỗng nếu lỗi để không crash UI\n  }\n  return res.json();\n}\n\n// 3. Tạo lịch học mới (API Thật) - Đã cập nhật Payload\nexport async function createSchedule(\n  roomId: string, \n  data: { \n    courseName: string; \n    lecturer: string; \n    weekdays: string[]; \n    startTime: string; \n    endTime: string; \n    // NEW: Thêm 2 trường này vào payload gửi đi\n    effectiveFrom: string;\n    effectiveTo: string;\n  }\n): Promise<Schedule> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${roomId}/schedules?code=${CREATE_SCHED_KEY}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data),\n    }\n  );\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || \"Failed to create schedule\");\n  }\n  return res.json();\n}\n\n// 4. Xóa lịch học (API Thật)\nexport async function deleteSchedule(scheduleId: string): Promise<void> {\n  // Encode ID để tránh lỗi URL nếu ID có ký tự đặc biệt\n  const encodedId = encodeURIComponent(scheduleId);\n  \n  const res = await fetch(\n    `${BASE_URL}/schedules/${encodedId}?code=${DEL_SCHED_KEY}`,\n    { method: \"DELETE\" }\n  );\n\n  if (!res.ok) {\n    // Đọc text lỗi từ server để debug\n    const errorText = await res.text();\n    console.error(`Delete failed (Status: ${res.status}):`, errorText);\n    throw new Error(`Failed to delete schedule: ${res.status} ${errorText}`);\n  }\n}\n\n// 5. Lấy danh sách thiết bị trong 1 room\nexport async function getDevicesForRoom(roomId: string): Promise<Device[]> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${encodeURIComponent(roomId)}/devices?code=${DEVICES_KEY}`,\n    { cache: \"no-store\" }\n  );\n\n  if (!res.ok) {\n    console.error(\"Failed to load devices\", res.status, await res.text());\n    throw new Error(\"Failed to load devices\");\n  }\n\n  return res.json();\n}\n\n// --- AC Control ---\n\nexport async function getAcState(\n  roomId: string,\n  deviceId: string\n): Promise<AcState> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${encodeURIComponent(\n      roomId\n    )}/devices/${encodeURIComponent(\n      deviceId\n    )}/ac-state?code=${AC_STATE_KEY}`,\n    { cache: \"no-store\" }\n  );\n\n  if (!res.ok) {\n    const text = await res.text();\n    console.error(\"Failed to load AC state\", {\n      status: res.status,\n      body: text,\n    });\n    throw new Error(text || \"Failed to load AC state\");\n  }\n\n  return res.json();\n}\n\nexport type UpdateAcPayload = {\n  powerState?: boolean;\n  mode?: string;\n  fanSpeed?: string;\n  targetTemperature?: number;\n  user?: string;\n  durationMinutes?: number;\n};\n\nexport async function updateAcSettings(\n  roomId: string,\n  deviceId: string,\n  payload: UpdateAcPayload\n): Promise<AcState> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${encodeURIComponent(\n      roomId\n    )}/devices/${encodeURIComponent(\n      deviceId\n    )}/ac-control?code=${AC_CONTROL_KEY}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    }\n  );\n\n  if (!res.ok) {\n    const text = await res.text();\n    console.error(\"Failed to update AC detail\", {\n      status: res.status,\n      body: text,\n    });\n    throw new Error(text || \"Failed to update AC\");\n  }\n\n  return res.json();\n}\n\n\n// --- Light control ---\n\nexport async function getLightState(\n  roomId: string,\n  deviceId: string\n): Promise<LightState> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${encodeURIComponent(\n      roomId\n    )}/devices/${encodeURIComponent(\n      deviceId\n    )}/light-state?code=${LIGHT_STATE_KEY}`,\n    { cache: \"no-store\" }\n  );\n\n  if (!res.ok) {\n    console.error(\"Failed to load light state\", res.status, await res.text());\n    throw new Error(\"Failed to load light state\");\n  }\n\n  return res.json();\n}\n\nexport type UpdateLightPayload = {\n  powerState?: boolean;\n  brightness?: number;\n  durationMinutes?: number;\n};\n\nexport async function updateLightSettings(\n  roomId: string,\n  deviceId: string,\n  payload: UpdateLightPayload\n): Promise<LightState> {\n  const res = await fetch(\n    `${BASE_URL}/rooms/${encodeURIComponent(\n      roomId\n    )}/devices/${encodeURIComponent(\n      deviceId\n    )}/light-control?code=${LIGHT_CONTROL_KEY}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    }\n  );\n\n    if (!res.ok) {\n    const text = await res.text();\n    console.error(\"Failed to update Light detail\", {\n      url: res.url,\n      status: res.status,\n      statusText: res.statusText,\n      body: text,\n    });\n    throw new Error(text || `Failed to update Light (${res.status})`);\n  }\n\n  return res.json();\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/lib/user.ts"],"sourcesContent":["export const CURRENT_USER = \"Bang\";\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe"}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/device-details/ac-detail-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState, useRef } from \"react\"\nimport { X, Wind, Minus, Plus, Clock, User, Zap, Power } from \"lucide-react\"\nimport { getAcState, updateAcSettings, type AcState } from \"@/lib/api\"\nimport { CURRENT_USER } from \"@/lib/user\"\n\ninterface ACDetailModalProps {\n  device: any;\n  roomId: string;\n  onClose: () => void;\n}\n\nexport default function ACDetailModal({ device, roomId, onClose }: ACDetailModalProps) {\n  const deviceId = device.id;\n\n  // Data State\n  const [acState, setAcState] = useState<AcState | null>(null);\n  \n  // UI Local States (Optimistic UI)\n  const [localPower, setLocalPower] = useState<boolean>(device.powerState ?? true);\n  const [localMode, setLocalMode] = useState<string>(device.mode ?? \"cool\");\n  const [localFan, setLocalFan] = useState<string>(device.fanSpeed ?? \"auto\");\n  const [localTemp, setLocalTemp] = useState<number>(device.targetTemperature ?? 24);\n\n  // Override Duration State (Default 60 mins)\n  const [overrideDuration, setOverrideDuration] = useState<number>(60);\n\n  const [saving, setSaving] = useState(false);\n  const [loading, setLoading] = useState(true);\n  \n  const isSavingRef = useRef(false);\n\n  // Helper: Format End Time (e.g. 14:30)\n  const getEndTimeString = (minutes: number) => {\n    const end = new Date();\n    end.setMinutes(end.getMinutes() + minutes);\n    return end.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });\n  };\n\n  // Helper: Format Duration (e.g. 1h 30m)\n  const formatDuration = (mins: number) => {\n    const h = Math.floor(mins / 60);\n    const m = mins % 60;\n    if (h === 0) return `${m}m`;\n    if (m === 0) return `${h}h`;\n    return `${h}h ${m}m`;\n  };\n\n  const fetchData = async (isInitialLoad = false) => {\n    if (isSavingRef.current && !isInitialLoad) return;\n    if (!roomId || !deviceId) return;\n\n    try {\n      const state = await getAcState(roomId, deviceId);\n      setAcState(state);\n      \n      if (!isSavingRef.current || isInitialLoad) {\n        if (state.powerState !== undefined) setLocalPower(state.powerState);\n        if (state.mode) setLocalMode(state.mode);\n        if (state.fanSpeed) setLocalFan(state.fanSpeed);\n        if (typeof state.targetTemperature === 'number') {\n          setLocalTemp(state.targetTemperature);\n        }\n      }\n    } catch (e) {\n      console.error(\"Poll error:\", e);\n    } finally {\n        setLoading(false); \n    }\n  };\n\n  useEffect(() => {\n    isSavingRef.current = false;\n    fetchData(true);\n    const interval = setInterval(() => fetchData(false), 5000);\n    return () => clearInterval(interval);\n  }, [roomId, deviceId]);\n\n  const handleUpdate = (updates: any) => {\n    if (updates.powerState !== undefined) setLocalPower(updates.powerState);\n    if (updates.mode) setLocalMode(updates.mode);\n    if (updates.fanSpeed) setLocalFan(updates.fanSpeed);\n    if (updates.targetTemperature) setLocalTemp(updates.targetTemperature);\n  };\n\n  async function onApplyChanges() {\n    try {\n      setSaving(true);\n      isSavingRef.current = true;\n\n      const updatedState = await updateAcSettings(roomId, deviceId, {\n        powerState: localPower,\n        mode: localMode,\n        fanSpeed: localFan,\n        targetTemperature: localTemp,\n        user: CURRENT_USER,\n        durationMinutes: overrideDuration,\n      });\n\n      setAcState(updatedState);\n      \n      // Sync lại local state để UI đồng bộ\n      if (updatedState.powerState !== undefined) setLocalPower(updatedState.powerState);\n      if (updatedState.mode) setLocalMode(updatedState.mode);\n      if (updatedState.fanSpeed) setLocalFan(updatedState.fanSpeed);\n      if (typeof updatedState.targetTemperature === 'number') {\n        setLocalTemp(updatedState.targetTemperature);\n      }\n\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to update settings. Please try again.\");\n    } finally {\n      setSaving(false);\n      isSavingRef.current = false;\n    }\n  }\n\n  const isOverride = acState?.overrideActive;\n  const currentTempDisplay = acState?.currentTemperature != null ? acState.currentTemperature.toFixed(1) : \"--\";\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200\">\n      <div className=\"absolute inset-0\" onClick={onClose}></div>\n\n      <div className=\"relative w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\n        \n        {/* Header */}\n        <div className=\"bg-white px-6 py-4 flex items-center justify-between border-b border-gray-100 sticky top-0 z-10\">\n          <div className=\"flex items-center gap-3\">\n            <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${localPower ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-400'}`}>\n              <Wind size={20} />\n            </div>\n            <div>\n              <h2 className=\"text-lg font-bold text-gray-900 leading-none\">\n                {device.name || \"AC Unit\"}\n              </h2>\n              <span className=\"text-xs text-gray-500 font-medium\">\n                {device.model || \"Smart Air Conditioner\"}\n              </span>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors\">\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6 overflow-y-auto custom-scrollbar\">\n          \n          {/* Status Banner */}\n          <div className={`rounded-xl p-3 flex items-start gap-3 border ${isOverride ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`}>\n            <div className={`mt-0.5 ${isOverride ? 'text-green-600' : 'text-gray-500'}`}>\n              {isOverride ? <Clock size={16} /> : <Zap size={16} />}\n            </div>\n            <div className=\"flex-1\">\n              <p className={`text-sm font-bold ${isOverride ? 'text-green-800' : 'text-gray-700'}`}>\n                {isOverride ? \"Manual Override Active\" : \"Auto Schedule Mode\"}\n              </p>\n              {isOverride ? (\n                <div className=\"mt-1 text-xs text-green-700 space-y-0.5\">\n                  <p>\n                    Ends at <strong>{acState?.overrideExpiresOnLocalFormatted?.split(' ')[0]}</strong>\n                  </p>\n                  <p className=\"flex items-center gap-1 opacity-90\">\n                    <User size={10} /> By {acState?.lastUpdatedBy || \"User\"}\n                  </p>\n                </div>\n              ) : (\n                <p className=\"text-xs text-gray-500 mt-0.5\">System is running automatically.</p>\n              )}\n            </div>\n          </div>\n\n          {/* --- POWER CONTROL --- */}\n          <div className=\"flex items-center justify-between bg-gray-50 rounded-2xl p-4 border border-gray-100\">\n            <span className=\"font-bold text-gray-700 text-sm uppercase tracking-wider\">Power</span>\n            <button\n              onClick={() => handleUpdate({ powerState: !localPower })}\n              disabled={saving}\n              className={`relative w-14 h-8 rounded-full transition-colors duration-300 focus:outline-none ${localPower ? \"bg-blue-500\" : \"bg-gray-300\"}`}\n            >\n              <div className={`absolute top-1 left-1 bg-white w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ${localPower ? \"translate-x-6\" : \"\"}`} />\n            </button>\n          </div>\n\n          {/* --- Temperature Control --- */}\n          <div className={`rounded-3xl p-6 text-center transition-all duration-300 ${\n            localPower \n              ? \"bg-gradient-to-br from-cyan-500 to-blue-600 text-white shadow-lg shadow-blue-200\" \n              : \"bg-gray-50 border-2 border-gray-100 text-gray-400\"\n          }`}>\n            <p className={`text-xs font-bold uppercase tracking-widest mb-4 ${localPower ? 'opacity-80' : 'text-gray-500'}`}>Target Temperature</p>\n            \n            <div className=\"flex items-center justify-center gap-6\">\n              <button\n                onClick={() => handleUpdate({ targetTemperature: Math.max(16, localTemp - 1) })}\n                disabled={!localPower || saving}\n                className={`w-12 h-12 rounded-full flex items-center justify-center transition-all active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed ${\n                    localPower ? \"bg-white/20 hover:bg-white/30\" : \"bg-gray-200 text-gray-500\"\n                }`}\n              >\n                <Minus size={24} />\n              </button>\n              \n              <div className=\"flex items-start\">\n                <span className=\"text-7xl font-bold tracking-tighter leading-none\">{localTemp}</span>\n                <span className=\"text-3xl font-light mt-1\">°</span>\n              </div>\n\n              <button\n                onClick={() => handleUpdate({ targetTemperature: Math.min(30, localTemp + 1) })}\n                disabled={!localPower || saving}\n                className={`w-12 h-12 rounded-full flex items-center justify-center transition-all active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed ${\n                    localPower ? \"bg-white/20 hover:bg-white/30\" : \"bg-gray-200 text-gray-500\"\n                }`}\n              >\n                <Plus size={24} />\n              </button>\n            </div>\n\n            <div className={`mt-6 inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium ${\n                localPower ? \"bg-black/10 backdrop-blur-md\" : \"bg-gray-200 text-gray-500\"\n            }`}>\n              <Wind size={12} /> Room Temp: {currentTempDisplay}°C\n            </div>\n          </div>\n\n          {/* Settings Group */}\n          <div className=\"space-y-4\">\n            {/* Mode */}\n            <div>\n              <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Mode</p>\n              <div className=\"flex bg-gray-100 p-1 rounded-xl\">\n                {[\"cool\", \"eco\"].map((m) => (\n                  <button\n                    key={m}\n                    onClick={() => handleUpdate({ mode: m })}\n                    disabled={!localPower}\n                    className={`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${\n                      localMode === m \n                        ? \"bg-white text-blue-600 shadow-sm border border-gray-100\" \n                        : \"text-gray-500 hover:text-gray-700\"\n                    } disabled:opacity-50`}\n                  >\n                    {m === \"cool\" ? \"Cool\" : \"Eco\"}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Fan Speed */}\n            <div>\n              <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Fan Speed</p>\n              <div className=\"grid grid-cols-4 gap-2\">\n                {[\"auto\", \"low\", \"medium\", \"high\"].map((s) => (\n                  <button\n                    key={s}\n                    onClick={() => handleUpdate({ fanSpeed: s })}\n                    disabled={!localPower}\n                    className={`py-2 rounded-lg text-xs font-bold uppercase border transition-all ${\n                      localFan === s\n                        ? \"bg-blue-50 border-blue-200 text-blue-700\"\n                        : \"bg-white border-gray-100 text-gray-500 hover:border-gray-200\"\n                    } disabled:opacity-50`}\n                  >\n                    {s === \"medium\" ? \"Med\" : s}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Override Duration Slider (Updated: 1min to 4h) */}\n          <div className=\"bg-gray-50 rounded-2xl p-5 border border-gray-100\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2 text-gray-700\">\n                <Clock size={16} className=\"text-blue-600\" />\n                <span className=\"font-bold text-sm\">Hold Settings For</span>\n              </div>\n              <span className=\"text-blue-700 font-bold bg-blue-50 px-2 py-0.5 rounded text-sm min-w-[60px] text-center\">\n                {formatDuration(overrideDuration)}\n              </span>\n            </div>\n\n            <div className=\"relative h-6 flex items-center\">\n              <input\n                type=\"range\"\n                min=\"1\"    // FIX: Bắt đầu từ 1 phút\n                max=\"240\"\n                step=\"1\"   // FIX: Bước nhảy 1 phút\n                value={overrideDuration}\n                onChange={(e) => setOverrideDuration(Number(e.target.value))}\n                className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 z-10\"\n              />\n              \n              {/* Visual Ticks (0h, 1h, 2h, 3h, 4h) */}\n              <div className=\"absolute w-full flex justify-between px-1 pointer-events-none\">\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 1 ? 'bg-blue-600' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 60 ? 'bg-blue-600' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 120 ? 'bg-blue-600' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 180 ? 'bg-blue-600' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 240 ? 'bg-blue-600' : 'bg-gray-300'}`} />\n              </div>\n            </div>\n            \n            <div className=\"flex justify-between text-xs text-gray-400 mt-2 font-medium\">\n              <span>1m</span>\n              <span className=\"pl-2\">1h</span>\n              <span className=\"pl-1\">2h</span>\n              <span className=\"pl-1\">3h</span>\n              <span>4h</span>\n            </div>\n\n            <p className=\"text-xs text-center text-gray-500 mt-3 border-t border-gray-200 pt-3\">\n              Will return to schedule at <span className=\"font-bold text-gray-800\">{getEndTimeString(overrideDuration)}</span>\n            </p>\n          </div>\n\n        </div>\n\n        {/* Footer Actions */}\n        <div className=\"p-5 border-t border-gray-100 bg-white sticky bottom-0 z-10\">\n          <button\n            onClick={onApplyChanges}\n            disabled={saving}\n            className=\"w-full py-3.5 rounded-xl bg-green-600 hover:bg-green-700 active:bg-green-800 text-white font-bold text-base shadow-lg shadow-green-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {saving ? (\n              <>\n                <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                <span>Applying...</span>\n              </>\n            ) : (\n              \"Apply Settings\"\n            )}\n          </button>\n        </div>\n\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1500, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/device-details/light-detail-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState, useRef } from \"react\"\nimport { X, Lightbulb, Clock, Zap, Power, Sun } from \"lucide-react\"\nimport { getLightState, updateLightSettings, type LightState } from \"@/lib/api\"\nimport { CURRENT_USER } from \"@/lib/user\"\n\ninterface LightDetailModalProps {\n  device: any;\n  onClose: () => void;\n}\n\nexport default function LightDetailModal({ device, onClose }: LightDetailModalProps) {\n  const roomId = device.roomId; // Lấy roomId từ prop device\n  const deviceId = device.id;\n\n  const [lightState, setLightState] = useState<LightState | null>(null);\n  \n  // Optimistic UI States\n  const [localPower, setLocalPower] = useState<boolean>(device.powerState ?? false);\n  const [localBrightness, setLocalBrightness] = useState<number>(device.brightness ?? 80);\n  const [overrideDuration, setOverrideDuration] = useState<number>(60);\n\n  const [saving, setSaving] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const isSavingRef = useRef(false);\n\n  const getEndTimeString = (minutes: number) => {\n    const end = new Date();\n    end.setMinutes(end.getMinutes() + minutes);\n    return end.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const fetchData = async () => {\n    if (isSavingRef.current || !roomId || !deviceId) return;\n\n    try {\n      const state = await getLightState(roomId, deviceId);\n      setLightState(state);\n      \n      if (!isSavingRef.current) {\n        setLocalPower(state.powerState);\n        // Chỉ cập nhật brightness nếu API trả về số hợp lệ\n        if (typeof state.brightness === 'number') setLocalBrightness(state.brightness);\n      }\n    } catch (e) {\n      console.error(\"Poll error:\", e);\n    } finally {\n        setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n    const interval = setInterval(fetchData, 5000);\n    return () => clearInterval(interval);\n  }, [roomId, deviceId]);\n\n  async function onApplyChanges() {\n    try {\n      setSaving(true);\n      isSavingRef.current = true;\n\n      await updateLightSettings(roomId, deviceId, {\n        powerState: localPower,\n        brightness: localBrightness,\n        durationMinutes: overrideDuration,\n      });\n\n      await fetchData();\n      // onClose(); // Giữ modal mở như AC\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to update light settings.\");\n    } finally {\n      setSaving(false);\n      isSavingRef.current = false;\n    }\n  }\n\n  const isOverride = lightState?.overrideActive;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200\">\n      <div className=\"absolute inset-0\" onClick={onClose}></div>\n\n      <div className=\"relative w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\n        \n        {/* Header */}\n        <div className=\"bg-white px-6 py-4 flex items-center justify-between border-b border-gray-100 sticky top-0 z-10\">\n          <div className=\"flex items-center gap-3\">\n            <div className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${localPower ? 'bg-amber-100 text-amber-600' : 'bg-gray-100 text-gray-400'}`}>\n              <Lightbulb size={20} />\n            </div>\n            <div>\n              <h2 className=\"text-lg font-bold text-gray-900 leading-none\">\n                {device.name || \"Smart Light\"}\n              </h2>\n              <span className=\"text-xs text-gray-500 font-medium\">\n                {device.model || \"Light Switch\"}\n              </span>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors\">\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6 overflow-y-auto custom-scrollbar\">\n          \n          {/* Status Badge */}\n          <div className={`rounded-xl p-3 flex items-start gap-3 border ${isOverride ? 'bg-green-50 border-green-200' : 'bg-gray-50 border-gray-200'}`}>\n            <div className={`mt-0.5 ${isOverride ? 'text-green-600' : 'text-gray-500'}`}>\n              {isOverride ? <Clock size={16} /> : <Zap size={16} />}\n            </div>\n            <div className=\"flex-1\">\n              <p className={`text-sm font-bold ${isOverride ? 'text-green-800' : 'text-gray-700'}`}>\n                {isOverride ? \"Manual Override Active\" : \"Auto Schedule Mode\"}\n              </p>\n              {isOverride ? (\n                <p className=\"text-xs text-green-700 mt-0.5\">\n                  Ends at <strong>{lightState?.overrideExpiresOnLocalFormatted?.split(' ')[0]}</strong> • By {lightState?.controlMode === 'manual-override' ? CURRENT_USER : 'System'}\n                </p>\n              ) : (\n                <p className=\"text-xs text-gray-500 mt-0.5\">Light is controlled automatically.</p>\n              )}\n            </div>\n          </div>\n\n          {/* Power Control */}\n          <div className=\"flex items-center justify-between bg-gray-50 rounded-2xl p-4 border border-gray-100\">\n            <span className=\"font-bold text-gray-700 text-sm uppercase tracking-wider\">Power</span>\n            <button\n              onClick={() => setLocalPower(!localPower)}\n              disabled={saving}\n              className={`relative w-14 h-8 rounded-full transition-colors duration-300 focus:outline-none ${localPower ? \"bg-amber-500\" : \"bg-gray-300\"}`}\n            >\n              <div className={`absolute top-1 left-1 bg-white w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ${localPower ? \"translate-x-6\" : \"\"}`} />\n            </button>\n          </div>\n\n          {/* Brightness Control (Amber/Yellow Theme) */}\n          <div className={`rounded-3xl p-6 text-center transition-all duration-300 ${\n            localPower \n              ? \"bg-gradient-to-br from-amber-400 to-orange-500 text-white shadow-lg shadow-orange-200\" \n              : \"bg-gray-50 border-2 border-gray-100 text-gray-400\"\n          }`}>\n            \n            <div className=\"flex items-center justify-between mb-6 px-2\">\n                <p className={`text-xs font-bold uppercase tracking-widest ${localPower ? 'opacity-90' : 'text-gray-500'}`}>Brightness Level</p>\n                <Sun size={18} className={localPower ? 'opacity-90' : 'text-gray-400'} />\n            </div>\n\n            <div className=\"relative flex flex-col items-center justify-center py-2\">\n                <span className=\"text-7xl font-bold tracking-tighter leading-none\">{localBrightness}%</span>\n                \n                {/* Brightness Slider */}\n                <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"5\"\n                    value={localBrightness}\n                    onChange={(e) => setLocalBrightness(Number(e.target.value))}\n                    disabled={!localPower || saving}\n                    className=\"w-full h-2 mt-6 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white hover:accent-gray-50\"\n                />\n                <div className=\"w-full flex justify-between text-[10px] font-medium mt-2 opacity-80\">\n                    <span>0%</span>\n                    <span>50%</span>\n                    <span>100%</span>\n                </div>\n            </div>\n          </div>\n\n          {/* Override Duration Slider */}\n          <div className=\"bg-gray-50 rounded-2xl p-5 border border-gray-100\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2 text-gray-700\">\n                <Clock size={16} className=\"text-amber-600\" />\n                <span className=\"font-bold text-sm\">Hold Settings For</span>\n              </div>\n              <span className=\"text-amber-700 font-bold bg-amber-100 px-2 py-0.5 rounded text-sm\">\n                {overrideDuration < 60 ? `${overrideDuration}m` : `${overrideDuration/60}h`}\n              </span>\n            </div>\n\n            <div className=\"relative h-6 flex items-center\">\n              <input\n                type=\"range\"\n                min=\"30\"\n                max=\"240\"\n                step=\"30\"\n                value={overrideDuration}\n                onChange={(e) => setOverrideDuration(Number(e.target.value))}\n                className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-amber-500 z-10\"\n              />\n              <div className=\"absolute w-full flex justify-between px-1 pointer-events-none\">\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 30 ? 'bg-amber-500' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 60 ? 'bg-amber-500' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 120 ? 'bg-amber-500' : 'bg-gray-300'}`} />\n                <div className={`w-1 h-1 rounded-full ${overrideDuration >= 240 ? 'bg-amber-500' : 'bg-gray-300'}`} />\n              </div>\n            </div>\n            \n            <p className=\"text-xs text-center text-gray-500 mt-3 border-t border-gray-200 pt-3\">\n              Will return to schedule at <span className=\"font-bold text-gray-800\">{getEndTimeString(overrideDuration)}</span>\n            </p>\n          </div>\n\n        </div>\n\n        {/* Footer Actions - Giữ màu Xanh lá */}\n        <div className=\"p-5 border-t border-gray-100 bg-white sticky bottom-0 z-10\">\n          <button\n            onClick={onApplyChanges}\n            disabled={saving}\n            className=\"w-full py-3.5 rounded-xl bg-green-600 hover:bg-green-700 active:bg-green-800 text-white font-bold text-base shadow-lg shadow-green-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {saving ? \"Applying...\" : \"Apply Settings\"}\n          </button>\n        </div>\n\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2041, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/detail-tabs/devices-tab.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Wind,\n  Lightbulb,\n  Thermometer,\n  Droplets,\n  Activity,\n  Zap,\n} from \"lucide-react\";\nimport ACDetailModal from \"@/components/device-details/ac-detail-modal\";\nimport LightDetailModal from \"@/components/device-details/light-detail-modal\";\n\nimport type { Room, Device } from \"@/lib/api\";\nimport { getDevicesForRoom } from \"@/lib/api\";\n\ninterface DevicesTabProps {\n  room: Room;\n}\n\n/**\n * Tạm thời Azure trả về device.type khá generic (sensor / device),\n * nên mình thử đoán loại dựa trên type + name để hiển thị icon & group.\n */\nfunction classifyDevice(device: Device): {\n  baseType: \"ac\" | \"light\" | \"sensor\" | \"other\";\n  sensorType?: \"temperature\" | \"humidity\" | \"motion\" | \"energy\" | \"other\";\n} {\n  const t = (device.type || \"\").toLowerCase();\n  const n = (device.name || \"\").toLowerCase();\n\n  // 👉 ƯU TIÊN SENSOR: nếu type hoặc name có chữ \"sensor\"\n  if (t.includes(\"sensor\") || n.includes(\"sensor\")) {\n    if (n.includes(\"temp\")) return { baseType: \"sensor\", sensorType: \"temperature\" };\n    if (n.includes(\"humid\")) return { baseType: \"sensor\", sensorType: \"humidity\" };\n    if (n.includes(\"motion\") || n.includes(\"pir\"))\n      return { baseType: \"sensor\", sensorType: \"motion\" };\n    if (n.includes(\"energy\") || n.includes(\"meter\"))\n      return { baseType: \"sensor\", sensorType: \"energy\" };\n    if (n.includes(\"light\") || n.includes(\"lux\"))\n      return { baseType: \"sensor\", sensorType: \"other\" }; // light sensor\n    return { baseType: \"sensor\", sensorType: \"other\" };\n  }\n\n  // Đoán AC từ type/name\n  if (t.includes(\"ac\") || t.includes(\"hvac\") || n.includes(\"ac\")) {\n    return { baseType: \"ac\" };\n  }\n\n  // Đoán light từ type/name\n  if (t.includes(\"light\") || n.includes(\"light\")) {\n    return { baseType: \"light\" };\n  }\n\n  return { baseType: \"other\" };\n}\n\n\nfunction getDeviceIcon(baseType: string, sensorType?: string) {\n  switch (baseType) {\n    case \"ac\":\n      return <Wind size={22} />;\n    case \"light\":\n      return <Lightbulb size={22} />;\n    case \"sensor\":\n      switch (sensorType) {\n        case \"temperature\":\n          return <Thermometer size={22} />;\n        case \"humidity\":\n          return <Droplets size={22} />;\n        case \"motion\":\n          return <Activity size={22} />;\n        case \"energy\":\n          return <Zap size={22} />;\n        default:\n          return <Activity size={22} />;\n      }\n    default:\n      return <Zap size={22} />;\n  }\n}\n\nfunction getIconBgColor(baseType: string, sensorType?: string) {\n  if (baseType === \"ac\") return \"bg-blue-50 text-blue-600\";\n  if (baseType === \"light\") return \"bg-yellow-50 text-yellow-600\";\n  if (baseType === \"sensor\") {\n    switch (sensorType) {\n      case \"temperature\":\n        return \"bg-orange-50 text-orange-600\";\n      case \"humidity\":\n        return \"bg-cyan-50 text-cyan-600\";\n      case \"motion\":\n        return \"bg-purple-50 text-purple-600\";\n      case \"energy\":\n        return \"bg-amber-50 text-amber-600\";\n      default:\n        return \"bg-gray-50 text-gray-600\";\n    }\n  }\n  return \"bg-gray-50 text-gray-600\";\n}\n\nexport default function DevicesTab({ room }: DevicesTabProps) {\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  type ClassifiedDevice = Device & {\n    baseType: \"ac\" | \"light\" | \"sensor\" | \"other\";\n    sensorType?: \"temperature\" | \"humidity\" | \"motion\" | \"energy\" | \"other\";\n  };\n  const [selectedDevice, setSelectedDevice] = useState<ClassifiedDevice | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    async function load() {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const data = await getDevicesForRoom(room.id);\n\n        if (!cancelled) {\n          setDevices(data);\n        }\n      } catch (err) {\n        console.error(\"Failed to load devices\", err);\n        if (!cancelled) setError(\"Failed to load devices\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [room.id]);\n\n  const enriched = devices.map((d) => {\n    const cls = classifyDevice(d);\n    return { ...d, ...cls };\n  });\n\n  const controllableDevices = enriched.filter(\n    (d) => d.baseType === \"ac\" || d.baseType === \"light\"\n  );\n  const sensors = enriched.filter((d) => d.baseType === \"sensor\");\n\n  if (loading) {\n    return <div className=\"text-sm text-gray-500 px-1 py-4\">Loading devices…</div>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-sm text-red-500 px-1 py-4\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Controllable Devices */}\n      <div>\n        <h3 className=\"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3 px-1\">\n          Controllable Devices\n        </h3>\n        {controllableDevices.length === 0 && (\n          <p className=\"text-xs text-gray-500 px-1\">\n            No controllable devices detected for this room.\n          </p>\n        )}\n        <div className=\"space-y-3\">\n          {controllableDevices.map((device) => (\n            <button\n              key={device.id}\n              onClick={() => setSelectedDevice(device)}\n              className=\"bg-white rounded-2xl p-5 w-full text-left hover:shadow-md transition-all border border-gray-100 hover:border-green-200\"\n            >\n              <div className=\"flex items-start justify-between mb-2\">\n                <div className=\"flex items-start gap-4 flex-1\">\n                  <div\n                    className={`w-12 h-12 rounded-xl flex items-center justify-center ${getIconBgColor(\n                      device.baseType!,\n                      device.sensorType as any\n                    )}`}\n                  >\n                    {getDeviceIcon(device.baseType!, device.sensorType)}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-semibold text-gray-900 mb-1\">\n                      {device.name}\n                    </h4>\n                    <p className=\"text-xs text-gray-500\">\n                      {device.type} • {device.id}\n                    </p>\n                  </div>\n                </div>\n                <span\n                  className={`px-3 py-1 rounded-full text-xs font-medium ${\n                    (device.status || \"\").toLowerCase() === \"online\"\n                      ? \"bg-green-50 text-green-700\"\n                      : \"bg-gray-100 text-gray-700\"\n                  }`}\n                >\n                  {device.status || \"unknown\"}\n                </span>\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Sensors */}\n      <div>\n        <h3 className=\"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3 px-1\">\n          Sensors (Read-only)\n        </h3>\n        {sensors.length === 0 && (\n          <p className=\"text-xs text-gray-500 px-1\">\n            No sensors detected for this room.\n          </p>\n        )}\n        <div className=\"grid grid-cols-2 gap-3\">\n          {sensors.map((device) => (\n            <div\n              key={device.id}\n              className=\"bg-white rounded-2xl p-4 border border-gray-100\"\n            >\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div\n                  className={`w-10 h-10 rounded-xl flex items-center justify-center ${getIconBgColor(\n                    device.baseType!,\n                    device.sensorType as any\n                  )}`}\n                >\n                  {getDeviceIcon(device.baseType!, device.sensorType)}\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-gray-900 text-sm\">\n                    {device.name}\n                  </h4>\n                  <p className=\"text-xs text-gray-500\">{device.type}</p>\n                </div>\n              </div>\n              <p className=\"text-xs text-gray-500\">\n                Status:{\" \"}\n                <span className=\"font-medium text-gray-800\">\n                  {device.status || \"unknown\"}\n                </span>\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Device Detail Modals (chỉ mở nếu sau này có AC / Light thật) */}\n      {selectedDevice && selectedDevice.baseType === \"ac\" && (\n        <ACDetailModal\n          device={selectedDevice}\n          roomId={room.id}\n          onClose={() => setSelectedDevice(null)}\n        />\n      )}\n      {selectedDevice && selectedDevice.baseType === \"light\" && (\n        <LightDetailModal\n          device={selectedDevice}\n          onClose={() => setSelectedDevice(null)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAGA;AAfA;;;;;;;AAqBA;;;CAGC,GACD,SAAS,eAAe,MAAc;IAIpC,MAAM,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE,EAAE,WAAW;IACzC,MAAM,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE,EAAE,WAAW;IAEzC,wDAAwD;IACxD,IAAI,EAAE,QAAQ,CAAC,aAAa,EAAE,QAAQ,CAAC,WAAW;QAChD,IAAI,EAAE,QAAQ,CAAC,SAAS,OAAO;YAAE,UAAU;YAAU,YAAY;QAAc;QAC/E,IAAI,EAAE,QAAQ,CAAC,UAAU,OAAO;YAAE,UAAU;YAAU,YAAY;QAAW;QAC7E,IAAI,EAAE,QAAQ,CAAC,aAAa,EAAE,QAAQ,CAAC,QACrC,OAAO;YAAE,UAAU;YAAU,YAAY;QAAS;QACpD,IAAI,EAAE,QAAQ,CAAC,aAAa,EAAE,QAAQ,CAAC,UACrC,OAAO;YAAE,UAAU;YAAU,YAAY;QAAS;QACpD,IAAI,EAAE,QAAQ,CAAC,YAAY,EAAE,QAAQ,CAAC,QACpC,OAAO;YAAE,UAAU;YAAU,YAAY;QAAQ,GAAG,eAAe;QACrE,OAAO;YAAE,UAAU;YAAU,YAAY;QAAQ;IACnD;IAEA,uBAAuB;IACvB,IAAI,EAAE,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,WAAW,EAAE,QAAQ,CAAC,OAAO;QAC9D,OAAO;YAAE,UAAU;QAAK;IAC1B;IAEA,0BAA0B;IAC1B,IAAI,EAAE,QAAQ,CAAC,YAAY,EAAE,QAAQ,CAAC,UAAU;QAC9C,OAAO;YAAE,UAAU;QAAQ;IAC7B;IAEA,OAAO;QAAE,UAAU;IAAQ;AAC7B;AAGA,SAAS,cAAc,QAAgB,EAAE,UAAmB;IAC1D,OAAQ;QACN,KAAK;YACH,qBAAO,8OAAC,0MAAI;gBAAC,MAAM;;;;;;QACrB,KAAK;YACH,qBAAO,8OAAC,yNAAS;gBAAC,MAAM;;;;;;QAC1B,KAAK;YACH,OAAQ;gBACN,KAAK;oBACH,qBAAO,8OAAC,+NAAW;wBAAC,MAAM;;;;;;gBAC5B,KAAK;oBACH,qBAAO,8OAAC,sNAAQ;wBAAC,MAAM;;;;;;gBACzB,KAAK;oBACH,qBAAO,8OAAC,sNAAQ;wBAAC,MAAM;;;;;;gBACzB,KAAK;oBACH,qBAAO,8OAAC,uMAAG;wBAAC,MAAM;;;;;;gBACpB;oBACE,qBAAO,8OAAC,sNAAQ;wBAAC,MAAM;;;;;;YAC3B;QACF;YACE,qBAAO,8OAAC,uMAAG;gBAAC,MAAM;;;;;;IACtB;AACF;AAEA,SAAS,eAAe,QAAgB,EAAE,UAAmB;IAC3D,IAAI,aAAa,MAAM,OAAO;IAC9B,IAAI,aAAa,SAAS,OAAO;IACjC,IAAI,aAAa,UAAU;QACzB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IACA,OAAO;AACT;AAEe,SAAS,WAAW,EAAE,IAAI,EAAmB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAKlD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAA0B;IAE9E,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY;QAEhB,eAAe;YACb,IAAI;gBACF,WAAW;gBACX,SAAS;gBAET,MAAM,OAAO,MAAM,IAAA,+HAAiB,EAAC,KAAK,EAAE;gBAE5C,IAAI,CAAC,WAAW;oBACd,WAAW;gBACb;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,IAAI,CAAC,WAAW,SAAS;YAC3B,SAAU;gBACR,IAAI,CAAC,WAAW,WAAW;YAC7B;QACF;QAEA;QACA,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC,KAAK,EAAE;KAAC;IAEZ,MAAM,WAAW,QAAQ,GAAG,CAAC,CAAC;QAC5B,MAAM,MAAM,eAAe;QAC3B,OAAO;YAAE,GAAG,CAAC;YAAE,GAAG,GAAG;QAAC;IACxB;IAEA,MAAM,sBAAsB,SAAS,MAAM,CACzC,CAAC,IAAM,EAAE,QAAQ,KAAK,QAAQ,EAAE,QAAQ,KAAK;IAE/C,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;IAEtD,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAkC;;;;;;IAC1D;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACZ;;;;;;IAGP;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAwE;;;;;;oBAGrF,oBAAoB,MAAM,KAAK,mBAC9B,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAI5C,8OAAC;wBAAI,WAAU;kCACZ,oBAAoB,GAAG,CAAC,CAAC,uBACxB,8OAAC;gCAEC,SAAS,IAAM,kBAAkB;gCACjC,WAAU;0CAEV,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,WAAW,CAAC,sDAAsD,EAAE,eAClE,OAAO,QAAQ,EACf,OAAO,UAAU,GAChB;8DAEF,cAAc,OAAO,QAAQ,EAAG,OAAO,UAAU;;;;;;8DAEpD,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAG,WAAU;sEACX,OAAO,IAAI;;;;;;sEAEd,8OAAC;4DAAE,WAAU;;gEACV,OAAO,IAAI;gEAAC;gEAAI,OAAO,EAAE;;;;;;;;;;;;;;;;;;;sDAIhC,8OAAC;4CACC,WAAW,CAAC,2CAA2C,EACrD,CAAC,OAAO,MAAM,IAAI,EAAE,EAAE,WAAW,OAAO,WACpC,+BACA,6BACJ;sDAED,OAAO,MAAM,IAAI;;;;;;;;;;;;+BA9BjB,OAAO,EAAE;;;;;;;;;;;;;;;;0BAuCtB,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAwE;;;;;;oBAGrF,QAAQ,MAAM,KAAK,mBAClB,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;kCAI5C,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,WAAW,CAAC,sDAAsD,EAAE,eAClE,OAAO,QAAQ,EACf,OAAO,UAAU,GAChB;0DAEF,cAAc,OAAO,QAAQ,EAAG,OAAO,UAAU;;;;;;0DAEpD,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEACX,OAAO,IAAI;;;;;;kEAEd,8OAAC;wDAAE,WAAU;kEAAyB,OAAO,IAAI;;;;;;;;;;;;;;;;;;kDAGrD,8OAAC;wCAAE,WAAU;;4CAAwB;4CAC3B;0DACR,8OAAC;gDAAK,WAAU;0DACb,OAAO,MAAM,IAAI;;;;;;;;;;;;;+BAtBjB,OAAO,EAAE;;;;;;;;;;;;;;;;YA+BrB,kBAAkB,eAAe,QAAQ,KAAK,sBAC7C,8OAAC,oKAAa;gBACZ,QAAQ;gBACR,QAAQ,KAAK,EAAE;gBACf,SAAS,IAAM,kBAAkB;;;;;;YAGpC,kBAAkB,eAAe,QAAQ,KAAK,yBAC7C,8OAAC,uKAAgB;gBACf,QAAQ;gBACR,SAAS,IAAM,kBAAkB;;;;;;;;;;;;AAK3C"}},
    {"offset": {"line": 2493, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/detail-tabs/schedule-tab.tsx"],"sourcesContent":["'use client'\n\nimport { Clock, Edit2 } from 'lucide-react'\n\ninterface ScheduleTabProps {\n  room: any\n}\n\nconst mockSchedules = [\n  {\n    id: '1',\n    courseName: 'Data Networks',\n    lecturer: 'Dr. Smith',\n    weekdays: ['MON', 'WED', 'FRI'],\n    startTime: '09:00',\n    endTime: '10:30',\n    enabled: true,\n  },\n  {\n    id: '2',\n    courseName: 'Advanced Python',\n    lecturer: 'Prof. Brown',\n    weekdays: ['TUE', 'THU'],\n    startTime: '13:30',\n    endTime: '15:00',\n    enabled: true,\n  },\n  {\n    id: '3',\n    courseName: 'Web Development',\n    lecturer: 'Dr. Lee',\n    weekdays: ['MON', 'WED'],\n    startTime: '15:30',\n    endTime: '17:00',\n    enabled: false,\n  },\n]\n\nexport default function ScheduleTab({ room }: ScheduleTabProps) {\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h3 className=\"font-semibold text-gray-900\">Classroom Schedule</h3>\n        <button className=\"text-emerald-600 hover:text-emerald-700 text-sm font-medium flex items-center gap-1\">\n          <Edit2 size={16} />\n          Edit\n        </button>\n      </div>\n\n      <div className=\"space-y-3\">\n        {mockSchedules.map((schedule) => (\n          <div\n            key={schedule.id}\n            className={`glass-panel p-5 border-l-4 ${\n              schedule.enabled ? 'border-l-emerald-500' : 'border-l-gray-300'\n            }`}\n          >\n            <div className=\"flex items-start justify-between mb-3\">\n              <div>\n                <h4 className=\"font-semibold text-gray-900\">{schedule.courseName}</h4>\n                <p className=\"text-sm text-gray-600\">{schedule.lecturer}</p>\n              </div>\n              {!schedule.enabled && (\n                <span className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded\">\n                  Disabled\n                </span>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2 mb-3 flex-wrap\">\n              {schedule.weekdays.map((day) => (\n                <span\n                  key={day}\n                  className=\"px-2 py-1 bg-emerald-50 text-emerald-700 text-xs font-medium rounded\"\n                >\n                  {day}\n                </span>\n              ))}\n            </div>\n\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n              <Clock size={16} />\n              <span>\n                {schedule.startTime} – {schedule.endTime}\n              </span>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <button className=\"w-full glass-panel p-4 font-medium text-emerald-600 hover:bg-emerald-50 transition-colors mt-6\">\n        Add Schedule\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAFA;;;AAQA,MAAM,gBAAgB;IACpB;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;YAAC;YAAO;YAAO;SAAM;QAC/B,WAAW;QACX,SAAS;QACT,SAAS;IACX;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;YAAC;YAAO;SAAM;QACxB,WAAW;QACX,SAAS;QACT,SAAS;IACX;IACA;QACE,IAAI;QACJ,YAAY;QACZ,UAAU;QACV,UAAU;YAAC;YAAO;SAAM;QACxB,WAAW;QACX,SAAS;QACT,SAAS;IACX;CACD;AAEc,SAAS,YAAY,EAAE,IAAI,EAAoB;IAC5D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC,2MAAK;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;0BAKvB,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,yBAClB,8OAAC;wBAEC,WAAW,CAAC,2BAA2B,EACrC,SAAS,OAAO,GAAG,yBAAyB,qBAC5C;;0CAEF,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAA+B,SAAS,UAAU;;;;;;0DAChE,8OAAC;gDAAE,WAAU;0DAAyB,SAAS,QAAQ;;;;;;;;;;;;oCAExD,CAAC,SAAS,OAAO,kBAChB,8OAAC;wCAAK,WAAU;kDAAkE;;;;;;;;;;;;0CAMtF,8OAAC;gCAAI,WAAU;0CACZ,SAAS,QAAQ,CAAC,GAAG,CAAC,CAAC,oBACtB,8OAAC;wCAEC,WAAU;kDAET;uCAHI;;;;;;;;;;0CAQX,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,MAAM;;;;;;kDACb,8OAAC;;4CACE,SAAS,SAAS;4CAAC;4CAAI,SAAS,OAAO;;;;;;;;;;;;;;uBA/BvC,SAAS,EAAE;;;;;;;;;;0BAsCtB,8OAAC;gBAAO,WAAU;0BAAiG;;;;;;;;;;;;AAKzH"}},
    {"offset": {"line": 2698, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/room-detail-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { X, Clock, Info } from \"lucide-react\"\nimport MetricsTab from \"@/components/detail-tabs/metrics-tab\"\nimport DevicesTab from \"@/components/detail-tabs/devices-tab\"\nimport ScheduleTabDetail from \"@/components/detail-tabs/schedule-tab\"\nimport type { Room } from \"@/lib/api\"\n\ninterface RoomDetailModalProps {\n  room: Room\n  onClose: () => void\n}\n\nexport default function RoomDetailModal({ room, onClose }: RoomDetailModalProps) {\n  const [activeTab, setActiveTab] = useState<\"metrics\" | \"devices\" | \"schedule\">(\"metrics\")\n\n  // ❗ Sửa lại cho đúng schema mới\n  const isActive = room.inClass === true\n\n  return (\n    <div className=\"fixed inset-0 bg-black/30 z-50 flex items-end\">\n      <div className=\"w-full bg-white rounded-t-3xl max-h-[90vh] overflow-y-auto animate-in slide-in-from-bottom duration-300\">\n        \n        {/* HEADER */}\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 p-6 z-10\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div\n                  className={`w-3 h-3 rounded-full ${\n                    isActive ? \"bg-green-500 shadow-sm shadow-green-500/50\" : \"bg-gray-400\"\n                  }`}\n                />\n                <h2 className=\"text-2xl font-bold text-gray-900\">{room.name}</h2>\n              </div>\n\n              <p className=\"text-sm text-gray-600\">\n                {room.building} • Floor {room.floor ?? \"1\"}\n              </p>\n            </div>\n\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\n            >\n              <X size={24} className=\"text-gray-700\" />\n            </button>\n          </div>\n\n          {/* CLASS STATUS BOX */}\n          {isActive ? (\n            <div className=\"bg-green-50 rounded-xl p-4 border border-green-100\">\n              <div className=\"flex items-start gap-3\">\n                <Clock size={20} className=\"text-green-600 mt-0.5\" />\n                <div>\n                  <p className=\"font-semibold text-green-900\">In class now</p>\n\n                  {room.courseName && (\n                    <p className=\"text-sm text-green-700 mt-1\">\n                      {room.courseName}\n                      {room.lecturerName ? ` • ${room.lecturerName}` : \"\"}\n                    </p>\n                  )}\n\n                  <p className=\"text-xs text-green-600 mt-1\">\n                    {/* TODO: Tính toán sau */}\n                    Time left: --\n                  </p>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-gray-50 rounded-xl p-4 border border-gray-200\">\n              <div className=\"flex items-start gap-3\">\n                <Info size={20} className=\"text-gray-500 mt-0.5\" />\n                <div>\n                  <p className=\"font-semibold text-gray-900\">No active class</p>\n\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Next class at {room.nextClass ?? \"--\"}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* TABS */}\n        <div className=\"sticky top-[180px] bg-white border-b border-gray-100 px-6 py-3 flex gap-2 z-10\">\n          {([\"metrics\", \"devices\", \"schedule\"] as const).map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`px-5 py-2.5 rounded-xl font-medium text-sm transition-all ${\n                activeTab === tab\n                  ? \"bg-green-600 text-white shadow-sm\"\n                  : \"bg-gray-50 text-gray-700 hover:bg-gray-100\"\n              }`}\n            >\n              {tab.charAt(0).toUpperCase() + tab.slice(1)}\n            </button>\n          ))}\n        </div>\n\n        {/* TAB CONTENT */}\n        <div className=\"p-6 pb-12\">\n          {activeTab === \"metrics\" && <MetricsTab room={room} />}\n          {activeTab === \"devices\" && <DevicesTab room={room} />}\n          {activeTab === \"schedule\" && <ScheduleTabDetail room={room} />}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AANA;;;;;;;AAce,SAAS,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAAwB;IAC7E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAqC;IAE/E,gCAAgC;IAChC,MAAM,WAAW,KAAK,OAAO,KAAK;IAElC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAGb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,WAAW,CAAC,qBAAqB,EAC/B,WAAW,+CAA+C,eAC1D;;;;;;8DAEJ,8OAAC;oDAAG,WAAU;8DAAoC,KAAK,IAAI;;;;;;;;;;;;sDAG7D,8OAAC;4CAAE,WAAU;;gDACV,KAAK,QAAQ;gDAAC;gDAAU,KAAK,KAAK,IAAI;;;;;;;;;;;;;8CAI3C,8OAAC;oCACC,SAAS;oCACT,WAAU;8CAEV,cAAA,8OAAC,iMAAC;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;;;;;;;wBAK1B,yBACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC3B,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAA+B;;;;;;4CAE3C,KAAK,UAAU,kBACd,8OAAC;gDAAE,WAAU;;oDACV,KAAK,UAAU;oDACf,KAAK,YAAY,GAAG,CAAC,GAAG,EAAE,KAAK,YAAY,EAAE,GAAG;;;;;;;0DAIrD,8OAAC;gDAAE,WAAU;0DACgB;;;;;;;;;;;;;;;;;;;;;;iDAOnC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAI;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC1B,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAA8B;;;;;;0DAE3C,8OAAC;gDAAE,WAAU;;oDAA6B;oDACzB,KAAK,SAAS,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAS7C,8OAAC;oBAAI,WAAU;8BACZ,AAAC;wBAAC;wBAAW;wBAAW;qBAAW,CAAW,GAAG,CAAC,CAAC,oBAClD,8OAAC;4BAEC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,0DAA0D,EACpE,cAAc,MACV,sCACA,8CACJ;sCAED,IAAI,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,KAAK,CAAC;2BARpC;;;;;;;;;;8BAcX,8OAAC;oBAAI,WAAU;;wBACZ,cAAc,2BAAa,8OAAC,0JAAU;4BAAC,MAAM;;;;;;wBAC7C,cAAc,2BAAa,8OAAC,0JAAU;4BAAC,MAAM;;;;;;wBAC7C,cAAc,4BAAc,8OAAC,2JAAiB;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKhE"}},
    {"offset": {"line": 2980, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/tabs/home-tab.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { User, Zap, Building2, ThermometerSun } from \"lucide-react\"\nimport RoomCard from \"@/components/room-card\"\nimport RoomDetailModal from \"@/components/room-detail-modal\"\nimport { getRooms, type Room } from \"@/lib/api\"\n\nexport default function HomeTab() {\n  const [rooms, setRooms] = useState<Room[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedRoom, setSelectedRoom] = useState<Room | null>(null)\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const data = await getRooms()\n        setRooms(data)\n      } finally {\n        setLoading(false)\n      }\n    }\n    load()\n  }, [])\n\n  const totalEnergyKWh = rooms.reduce(\n    (sum, room) => sum + (room.currentEnergyKWh ?? 0),\n    0\n  )\n\n  const activeRooms = rooms.filter((r) => r.inClass).length\n\n  const avgTemp =\n    rooms.length > 0\n      ? rooms.reduce(\n          (sum, room) => sum + (room.currentTemperature ?? 0),\n          0\n        ) / rooms.length\n      : 0\n\n  const today = new Date()\n  const dateString = today.toLocaleDateString(\"en-US\", {\n    weekday: \"long\",\n    month: \"short\",\n    day: \"numeric\",\n  })\n\n  return (\n    <div className=\"px-4 pt-6 pb-8\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-1\">\n            GreenTwin Campus\n          </h1>\n          <p className=\"text-sm text-gray-600\">Today, {dateString}</p>\n        </div>\n        <button className=\"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors\">\n          <User size={20} className=\"text-gray-600\" />\n        </button>\n      </div>\n\n      {/* Overview */}\n      <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6\">\n        <h3 className=\"text-sm font-semibold text-gray-600 mb-4 uppercase tracking-wide\">\n          Today&apos;s Overview\n        </h3>\n\n        {loading ? (\n          <p className=\"text-sm text-gray-500\">Loading summary…</p>\n        ) : (\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 rounded-xl bg-green-50 flex items-center justify-center mx-auto mb-3\">\n                <Building2 size={24} className=\"text-green-600\" />\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {activeRooms}\n              </p>\n              <p className=\"text-xs text-gray-600 mt-1\">Rooms in class</p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 rounded-xl bg-amber-50 flex items-center justify-center mx-auto mb-3\">\n                <Zap size={24} className=\"text-amber-600\" />\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {totalEnergyKWh.toFixed(1)}\n              </p>\n              <p className=\"text-xs text-gray-600 mt-1\">kWh Today</p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center mx-auto mb-3\">\n                <ThermometerSun size={24} className=\"text-blue-600\" />\n              </div>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {avgTemp.toFixed(1)}°C\n              </p>\n              <p className=\"text-xs text-gray-600 mt-1\">Avg Temp</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Room list */}\n      <div className=\"space-y-3 mb-8\">\n        <h2 className=\"text-lg font-semibold text-gray-900 px-1\">\n          Classrooms\n        </h2>\n\n        {loading ? (\n          <p className=\"px-1 text-sm text-gray-500\">Loading rooms…</p>\n        ) : rooms.length > 0 ? (\n          rooms.map((room) => (\n            <RoomCard\n              key={room.id}\n              room={room}\n              onClick={() => setSelectedRoom(room)}\n            />\n          ))\n        ) : (\n          <p className=\"px-1 text-sm text-gray-500\">No rooms available.</p>\n        )}\n      </div>\n\n      {/* Room Detail Modal */}\n      {selectedRoom && (\n        <RoomDetailModal\n          room={selectedRoom}\n          onClose={() => setSelectedRoom(null)}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3292, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/tabs/rooms-tab.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Search } from \"lucide-react\"\nimport RoomCard from \"@/components/room-card\"\nimport RoomDetailModal from \"@/components/room-detail-modal\"\nimport { getRooms, type Room } from \"@/lib/api\"\nimport DevicesTab from \"@/components/detail-tabs/devices-tab\"\n\n\nexport default function RoomsTab() {\n  const [selectedRoom, setSelectedRoom] = useState<Room | null>(null)\n  const [filter, setFilter] = useState<\"all\" | \"active\" | \"idle\">(\"all\")\n  const [searchQuery, setSearchQuery] = useState(\"\")\n\n  const [rooms, setRooms] = useState<Room[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const data = await getRooms()\n        console.log(\"Loaded rooms from API:\", data) // DEBUG\n        setRooms(data)\n      } catch (err) {\n        console.error(\"Error loading rooms\", err)\n        setRooms([])\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    load()\n  }, [])\n\n  const filteredRooms = rooms.filter((room) => {\n    const matchesFilter =\n      filter === \"all\" ||\n      (filter === \"active\" && room.inClass) ||\n      (filter === \"idle\" && !room.inClass)\n\n    const q = searchQuery.toLowerCase()\n    const matchesSearch =\n      room.name.toLowerCase().includes(q) ||\n      room.building.toLowerCase().includes(q)\n\n    return matchesFilter && matchesSearch\n  })\n\n  if (loading) {\n    return (\n      <div className=\"px-4 pt-6 pb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Rooms</h1>\n        <div className=\"p-4 text-sm text-gray-500\">Loading rooms…</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"px-4 pt-6 pb-8\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Rooms</h1>\n\n      {/* Search Bar */}\n      <div className=\"relative mb-4\">\n        <Search\n          size={20}\n          className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\"\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Search by room or building...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"w-full pl-12 pr-4 py-3 bg-white rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-gray-900\"\n        />\n      </div>\n\n      {/* Filter Chips */}\n      <div className=\"flex gap-2 mb-6\">\n        <button\n          onClick={() => setFilter(\"all\")}\n          className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${\n            filter === \"all\"\n              ? \"bg-green-600 text-white shadow-sm\"\n              : \"bg-white text-gray-700 border border-gray-200 hover:border-gray-300\"\n          }`}\n        >\n          All Rooms\n        </button>\n        <button\n          onClick={() => setFilter(\"active\")}\n          className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${\n            filter === \"active\"\n              ? \"bg-green-600 text-white shadow-sm\"\n              : \"bg-white text-gray-700 border border-gray-200 hover:border-gray-300\"\n          }`}\n        >\n          In Class\n        </button>\n        <button\n          onClick={() => setFilter(\"idle\")}\n          className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${\n            filter === \"idle\"\n              ? \"bg-green-600 text-white shadow-sm\"\n              : \"bg-white text-gray-700 border border-gray-200 hover:border-gray-300\"\n          }`}\n        >\n          Idle\n        </button>\n      </div>\n\n      {/* Room List */}\n      {filteredRooms.length > 0 ? (\n        <div className=\"space-y-3\">\n          {filteredRooms.map((room) => (\n            <RoomCard\n              key={room.id}\n              room={room}\n              onClick={() => setSelectedRoom(room)}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">No rooms found</p>\n        </div>\n      )}\n\n      {/* Room Detail Modal */}\n      {selectedRoom && (\n        <RoomDetailModal\n          room={selectedRoom}\n          onClose={() => setSelectedRoom(null)}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAC9D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAA4B;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,eAAe;YACb,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,sHAAQ;gBAC3B,QAAQ,GAAG,CAAC,0BAA0B,OAAM,QAAQ;gBACpD,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;gBACrC,SAAS,EAAE;YACb,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC;QAClC,MAAM,gBACJ,WAAW,SACV,WAAW,YAAY,KAAK,OAAO,IACnC,WAAW,UAAU,CAAC,KAAK,OAAO;QAErC,MAAM,IAAI,YAAY,WAAW;QACjC,MAAM,gBACJ,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,MACjC,KAAK,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC;QAEvC,OAAO,iBAAiB;IAC1B;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,8OAAC;oBAAI,WAAU;8BAA4B;;;;;;;;;;;;IAGjD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwC;;;;;;0BAGtD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gNAAM;wBACL,MAAM;wBACN,WAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wBAC9C,WAAU;;;;;;;;;;;;0BAKd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,UAAU;wBACzB,WAAW,CAAC,wDAAwD,EAClE,WAAW,QACP,sCACA,uEACJ;kCACH;;;;;;kCAGD,8OAAC;wBACC,SAAS,IAAM,UAAU;wBACzB,WAAW,CAAC,wDAAwD,EAClE,WAAW,WACP,sCACA,uEACJ;kCACH;;;;;;kCAGD,8OAAC;wBACC,SAAS,IAAM,UAAU;wBACzB,WAAW,CAAC,wDAAwD,EAClE,WAAW,SACP,sCACA,uEACJ;kCACH;;;;;;;;;;;;YAMF,cAAc,MAAM,GAAG,kBACtB,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,qBAClB,8OAAC,sIAAQ;wBAEP,MAAM;wBACN,SAAS,IAAM,gBAAgB;uBAF1B,KAAK,EAAE;;;;;;;;;qCAOlB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;YAKhC,8BACC,8OAAC,iJAAe;gBACd,MAAM;gBACN,SAAS,IAAM,gBAAgB;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 3486, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/components/tabs/schedule-tab.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState, useRef } from \"react\"\nimport { Upload, Plus, Trash2, Clock, Calendar, User, BookOpen } from \"lucide-react\"\nimport { getRooms, getSchedules, createSchedule, deleteSchedule, type Room, type Schedule } from \"@/lib/api\"\nimport * as XLSX from 'xlsx'; \n\n// Helper parse ngày giờ\nconst parseExcelDate = (excelValue: any, isTime = false): string => {\n  if (!excelValue) return \"\";\n  \n  if (typeof excelValue === 'number') {\n    const date = new Date(Math.round((excelValue - 25569) * 86400 * 1000));\n    if (isTime) {\n      const h = date.getUTCHours().toString().padStart(2, '0');\n      const m = date.getUTCMinutes().toString().padStart(2, '0');\n      const s = date.getUTCSeconds().toString().padStart(2, '0');\n      return `${h}:${m}:${s}`;\n    } else {\n      return date.toISOString().split('T')[0];\n    }\n  }\n  \n  const str = String(excelValue).trim();\n  if (isTime && str.includes(':')) {\n      const parts = str.split(':');\n      const h = parts[0].padStart(2, '0');\n      const m = parts[1] ? parts[1].padStart(2, '0') : '00';\n      const s = parts[2] ? parts[2].padStart(2, '0') : '00';\n      return `${h}:${m}:${s}`;\n  }\n  return str;\n};\n\nexport default function ScheduleTab() {\n  const [rooms, setRooms] = useState<Room[]>([])\n  const [schedules, setSchedules] = useState<Schedule[]>([])\n  const [loading, setLoading] = useState(true)\n  const [creating, setCreating] = useState(false)\n  const [importing, setImporting] = useState(false) \n\n  // Form state\n  const [selectedRoom, setSelectedRoom] = useState<string>(\"\")\n  const [courseName, setCourseName] = useState(\"\")\n  const [lecturer, setLecturer] = useState(\"\")\n  const [selectedDays, setSelectedDays] = useState<string[]>([])\n  const [startTime, setStartTime] = useState(\"\")\n  const [endTime, setEndTime] = useState(\"\")\n  const [effectiveFrom, setEffectiveFrom] = useState(\"\")\n  const [effectiveTo, setEffectiveTo] = useState(\"\")\n\n  const weekdays = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\", \"SUN\"]\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const loadData = async () => {\n    // Không set loading=true ở đây để tránh nháy màn hình khi reload ngầm\n    try {\n      const [r, s] = await Promise.all([getRooms(), getSchedules()])\n      setRooms(r)\n      setSchedules(s)\n    } catch (err) {\n      console.error(\"Failed to load schedule data\", err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  function toggleDay(day: string) {\n    if (selectedDays.includes(day)) {\n        setSelectedDays([])\n    } else {\n        setSelectedDays([day])\n    }\n  }\n\n  async function handleCreateSchedule() {\n    if (!selectedRoom || !courseName || !startTime || !endTime || !effectiveFrom || !effectiveTo || selectedDays.length === 0) {\n      alert(\"Please fill in all required fields.\")\n      return\n    }\n\n    setCreating(true)\n    try {\n      const formattedStartTime = startTime.length === 5 ? `${startTime}:00` : startTime;\n      const formattedEndTime = endTime.length === 5 ? `${endTime}:00` : endTime;\n\n      // 1. Gọi API tạo lịch\n      const newSchedule = await createSchedule(selectedRoom, {\n        courseName,\n        lecturer,\n        weekdays: selectedDays,\n        startTime: formattedStartTime,\n        endTime: formattedEndTime,\n        effectiveFrom,\n        effectiveTo\n      })\n\n      // 2. Cập nhật UI NGAY LẬP TỨC bằng cách thêm item mới vào state\n      // (Cần bổ sung roomName cho item mới để hiển thị đẹp)\n      const roomObj = rooms.find(r => r.id === selectedRoom);\n      const scheduleWithRoomName: Schedule = {\n        ...newSchedule,\n        roomName: roomObj ? (roomObj.name || roomObj.id) : selectedRoom // Fallback name\n      };\n\n      setSchedules(prev => [...prev, scheduleWithRoomName]);\n\n      // Reset form\n      setCourseName(\"\")\n      setLecturer(\"\")\n      setSelectedDays([])\n      setStartTime(\"\")\n      setEndTime(\"\")\n      setEffectiveFrom(\"\")\n      setEffectiveTo(\"\")\n      \n      // Không cần alert, UI tự cập nhật là đủ feedback rồi\n      // alert(\"Schedule created successfully!\") \n\n    } catch (err) {\n      console.error(\"Create error:\", err)\n      alert(\"Failed to create schedule.\")\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  async function handleDeleteSchedule(id: string) {\n    if (!confirm(\"Are you sure you want to delete this schedule?\")) return\n    \n    // 1. Optimistic Update: Xóa khỏi UI ngay lập tức\n    const previousSchedules = [...schedules];\n    setSchedules(prev => prev.filter(s => s.id !== id));\n\n    try {\n      // 2. Gọi API xóa\n      await deleteSchedule(id)\n    } catch (err) {\n      console.error(err)\n      alert(\"Failed to delete schedule.\")\n      // Nếu lỗi, hoàn tác lại UI\n      setSchedules(previousSchedules);\n    }\n  }\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    setImporting(true);\n    const reader = new FileReader();\n\n    reader.onload = async (evt) => {\n      try {\n        const bstr = evt.target?.result;\n        const wb = XLSX.read(bstr, { type: 'binary' });\n        const wsname = wb.SheetNames[0];\n        const ws = wb.Sheets[wsname];\n        const data = XLSX.utils.sheet_to_json(ws) as any[];\n\n        let successCount = 0;\n        let errorCount = 0;\n        \n        // Danh sách các lịch mới được tạo thành công để update UI\n        const newSchedules: Schedule[] = [];\n\n        for (const row of data) {\n            const roomName = row.Room || row.room;\n            const courseName = row.Course || row.course;\n            const lecturer = row.Lecturer || row.lecturer;\n            const weekdaysRaw = row.Weekdays || row.weekdays;\n            const startRaw = row.Start || row.start;\n            const endRaw = row.End || row.end;\n            const effFromRaw = row.EffectiveFrom || row.effectiveFrom || row.effective_from;\n            const effToRaw = row.EffectiveTo || row.effectiveTo || row.effective_to;\n\n            const room = rooms.find(r => r.name === roomName || r.id === roomName);\n            \n            if (room && courseName && startRaw && endRaw) {\n                try {\n                    const sTime = parseExcelDate(startRaw, true);\n                    const eTime = parseExcelDate(endRaw, true);\n                    \n                    let dayToSave = \"\";\n                    if (weekdaysRaw) {\n                        const parts = String(weekdaysRaw).split(',');\n                        if (parts.length > 0) {\n                            dayToSave = parts[0].trim().toUpperCase();\n                        }\n                    }\n\n                    const validDays = [\"MON\", \"TUE\", \"WED\", \"THU\", \"FRI\", \"SAT\", \"SUN\"];\n                    if (!validDays.includes(dayToSave)) {\n                        errorCount++;\n                        continue;\n                    }\n\n                    const effFrom = parseExcelDate(effFromRaw) || \"2024-01-01\";\n                    const effTo = parseExcelDate(effToRaw) || \"2024-12-31\";\n\n                    // Gọi API\n                    const created = await createSchedule(room.id, {\n                        courseName: String(courseName),\n                        lecturer: String(lecturer || \"\"),\n                        weekdays: [dayToSave],\n                        startTime: sTime,\n                        endTime: eTime,\n                        effectiveFrom: effFrom,\n                        effectiveTo: effTo\n                    });\n                    \n                    // Thêm vào danh sách tạm để update UI\n                    newSchedules.push({\n                        ...created,\n                        roomName: room.name || room.id\n                    });\n\n                    successCount++;\n                } catch (err) {\n                    console.error(\"Failed to import row:\", row, err);\n                    errorCount++;\n                }\n            } else {\n                errorCount++;\n            }\n        }\n\n        // Cập nhật UI ngay lập tức với các lịch vừa import\n        setSchedules(prev => [...prev, ...newSchedules]);\n\n        alert(`Import completed.\\nSuccess: ${successCount}\\nFailed: ${errorCount}`);\n\n      } catch (error) {\n        console.error(\"Error reading file:\", error);\n        alert(\"Failed to process Excel file.\");\n      } finally {\n        setImporting(false);\n        if (fileInputRef.current) fileInputRef.current.value = \"\"; \n      }\n    };\n    reader.readAsBinaryString(file);\n  };\n\n  const triggerFileInput = () => {\n    fileInputRef.current?.click();\n  };\n\n  if (loading)\n    return (\n      <div className=\"flex items-center justify-center py-20 text-gray-500 gap-2\">\n        <div className=\"w-5 h-5 border-2 border-emerald-500 border-t-transparent rounded-full animate-spin\" />\n        Loading schedules...\n      </div>\n    )\n\n  return (\n    <div className=\"px-4 pt-6 pb-20 space-y-8\">\n      \n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2 flex items-center gap-2\">\n          <Calendar className=\"text-emerald-600\" />\n          Classroom Schedules\n        </h1>\n        <p className=\"text-sm text-gray-600\">\n          Manage recurring class schedules to automate AC & Lighting controls.\n        </p>\n      </div>\n\n      {/* Import Section */}\n      <div className=\"glass-panel p-8 text-center border border-gray-100 bg-white rounded-2xl shadow-sm\">\n        <div className=\"flex justify-center mb-4\">\n          <Upload size={32} className=\"text-emerald-600\" />\n        </div>\n        <h3 className=\"font-semibold text-gray-900 mb-2\">Import Schedule</h3>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Upload Excel file with columns: Room, Course, Lecturer, Weekdays, Start, End, EffectiveFrom, EffectiveTo\n        </p>\n        \n        <input \n            type=\"file\" \n            accept=\".xlsx, .xls\" \n            ref={fileInputRef} \n            onChange={handleFileUpload} \n            style={{ display: 'none' }} \n        />\n\n        <button \n            onClick={triggerFileInput}\n            disabled={importing}\n            className=\"px-6 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm flex items-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {importing ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                Importing...\n              </>\n          ) : (\n              \"Choose Excel File\"\n          )}\n        </button>\n      </div>\n\n      {/* Create Form */}\n      <div className=\"glass-panel p-6 border border-gray-100 bg-white rounded-2xl shadow-sm\">\n        <h3 className=\"font-semibold text-gray-900 mb-5 flex items-center gap-2\">\n          <Plus size={20} className=\"text-emerald-600\" />\n          Add New Schedule (Manual)\n        </h3>\n\n        <div className=\"space-y-5\">\n          {/* Room Selection */}\n          <div>\n            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Room</label>\n            <select\n              value={selectedRoom}\n              onChange={(e) => setSelectedRoom(e.target.value)}\n              className=\"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all\"\n            >\n              <option value=\"\">Select a Room...</option>\n              {rooms.map((room) => (\n                <option key={room.id} value={room.id}>\n                  {room.name} ({room.building} - {room.floor})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Course & Lecturer */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Course Name</label>\n              <div className=\"relative\">\n                <BookOpen size={18} className=\"absolute left-3 top-3 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={courseName}\n                  onChange={(e) => setCourseName(e.target.value)}\n                  placeholder=\"e.g. Advanced IoT\"\n                  className=\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none transition-all\"\n                />\n              </div>\n            </div>\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Lecturer</label>\n              <div className=\"relative\">\n                <User size={18} className=\"absolute left-3 top-3 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={lecturer}\n                  onChange={(e) => setLecturer(e.target.value)}\n                  placeholder=\"e.g. Dr. Smith\"\n                  className=\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none transition-all\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* NEW: Effective Dates */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Effective From</label>\n              <input\n                type=\"date\"\n                value={effectiveFrom}\n                onChange={(e) => setEffectiveFrom(e.target.value)}\n                className=\"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-emerald-500 outline-none\"\n              />\n            </div>\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Effective To</label>\n              <input\n                type=\"date\"\n                value={effectiveTo}\n                onChange={(e) => setEffectiveTo(e.target.value)}\n                className=\"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-emerald-500 outline-none\"\n              />\n            </div>\n          </div>\n\n          {/* Weekdays */}\n          <div>\n            <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block\">Days of Week</label>\n            <div className=\"flex flex-wrap gap-2\">\n              {weekdays.map((day) => (\n                <button\n                  key={day}\n                  onClick={() => toggleDay(day)}\n                  className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${\n                    selectedDays.includes(day)\n                      ? \"bg-emerald-600 text-white shadow-md shadow-emerald-200 scale-105\"\n                      : \"bg-gray-100 text-gray-500 hover:bg-gray-200\"\n                  }`}\n                >\n                  {day}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Time Range */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">Start Time</label>\n              <input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n                className=\"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-emerald-500 outline-none\"\n              />\n            </div>\n            <div>\n              <label className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block\">End Time</label>\n              <input\n                type=\"time\"\n                value={endTime}\n                onChange={(e) => setEndTime(e.target.value)}\n                className=\"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-emerald-500 outline-none\"\n              />\n            </div>\n          </div>\n\n          <button\n            onClick={handleCreateSchedule}\n            disabled={creating}\n            className=\"w-full py-3 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-all font-bold shadow-lg shadow-emerald-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {creating ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              \"Save Schedule\"\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Schedule List */}\n      <div className=\"mb-8\">\n        <h3 className=\"font-semibold text-gray-900 mb-4\">All Schedules</h3>\n        <div className=\"space-y-3\">\n          {schedules.length === 0 ? (\n             <div className=\"text-center py-8 text-gray-400 text-sm border border-dashed border-gray-200 rounded-xl bg-gray-50\">No schedules found</div>\n          ) : (\n             schedules.map((schedule) => (\n            <div key={schedule.id} className=\"glass-panel p-5 border-l-4 border-l-emerald-500 bg-white rounded-xl shadow-sm\">\n              <div className=\"flex items-start justify-between mb-3\">\n                <div>\n                  <p className=\"text-xs font-medium text-gray-600 uppercase\">{schedule.roomName}</p>\n                  <h4 className=\"font-semibold text-gray-900 mt-1\">{schedule.courseName}</h4>\n                  <p className=\"text-sm text-gray-600\">{schedule.lecturer}</p>\n                </div>\n                <button \n                  onClick={() => handleDeleteSchedule(schedule.id)}\n                  className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                  title=\"Delete Schedule\"\n                >\n                  <Trash2 size={18} className=\"text-gray-400 hover:text-red-600\" />\n                </button>\n              </div>\n              \n              <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                {/* Fix lỗi toString() trên type never bằng String() */}\n                {(Array.isArray(schedule.weekdays) \n                    ? schedule.weekdays \n                    : String(schedule.weekdays || \"\").split(',')\n                 ).map((day) => (\n                  <span\n                    key={day}\n                    className=\"px-2 py-1 bg-emerald-50 text-emerald-700 text-xs font-medium rounded\"\n                  >\n                    {day.trim().slice(0, 3)}\n                  </span>\n                ))}\n              </div>\n              \n              <div className=\"flex justify-between items-end pt-2 border-t border-gray-50 mt-2\">\n                  <p className=\"text-sm text-gray-600 flex items-center gap-1\">\n                    <Clock size={14} className=\"text-emerald-600\"/> \n                    {schedule.startTime ? schedule.startTime.substring(0, 5) : \"--:--\"} – {schedule.endTime ? schedule.endTime.substring(0, 5) : \"--:--\"}\n                  </p>\n                  {schedule.effectiveFrom && (\n                      <p className=\"text-[10px] text-gray-400\">\n                          {schedule.effectiveFrom} → {schedule.effectiveTo}\n                      </p>\n                  )}\n              </div>\n            </div>\n          )))}\n        </div>\n      </div>\n\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4396, "column": 0}, "map": {"version":3,"sources":["file:///Users/dieptruongkhanhbang/Documents/IT_PROJECT/GreenTwin/FUNCTION%20/GreenTwinUpdater/GreenTwinAppUI/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport HomeTab from \"@/components/tabs/home-tab\"\nimport RoomsTab from \"@/components/tabs/rooms-tab\"\nimport ScheduleTab from \"@/components/tabs/schedule-tab\"\nimport { Home, Building2, Calendar } from \"lucide-react\"\n\nexport default function GreenTwinApp() {\n  const [activeTab, setActiveTab] = useState<\"home\" | \"rooms\" | \"schedule\">(\"home\")\n\n  return (\n    <main className=\"min-h-screen bg-gray-50 flex flex-col\">\n      <div className=\"flex-1 overflow-y-auto pb-20\">\n        {activeTab === \"home\" && <HomeTab />}\n        {activeTab === \"rooms\" && <RoomsTab />}\n        {activeTab === \"schedule\" && <ScheduleTab />}\n      </div>\n\n      <nav className=\"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t border-gray-200 shadow-lg\">\n        <div className=\"flex justify-around items-center py-2\">\n          <button\n            onClick={() => setActiveTab(\"home\")}\n            className={`flex flex-col items-center gap-1 px-6 py-2 rounded-xl transition-all ${\n              activeTab === \"home\" ? \"text-green-600 bg-green-50\" : \"text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            <Home size={24} strokeWidth={activeTab === \"home\" ? 2.5 : 2} />\n            <span className=\"text-xs font-medium\">Home</span>\n          </button>\n          <button\n            onClick={() => setActiveTab(\"rooms\")}\n            className={`flex flex-col items-center gap-1 px-6 py-2 rounded-xl transition-all ${\n              activeTab === \"rooms\" ? \"text-green-600 bg-green-50\" : \"text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            <Building2 size={24} strokeWidth={activeTab === \"rooms\" ? 2.5 : 2} />\n            <span className=\"text-xs font-medium\">Rooms</span>\n          </button>\n          <button\n            onClick={() => setActiveTab(\"schedule\")}\n            className={`flex flex-col items-center gap-1 px-6 py-2 rounded-xl transition-all ${\n              activeTab === \"schedule\" ? \"text-green-600 bg-green-50\" : \"text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            <Calendar size={24} strokeWidth={activeTab === \"schedule\" ? 2.5 : 2} />\n            <span className=\"text-xs font-medium\">Schedule</span>\n          </button>\n        </div>\n      </nav>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgC;IAE1E,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;oBACZ,cAAc,wBAAU,8OAAC,6IAAO;;;;;oBAChC,cAAc,yBAAW,8OAAC,8IAAQ;;;;;oBAClC,cAAc,4BAAc,8OAAC,iJAAW;;;;;;;;;;;0BAG3C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,qEAAqE,EAC/E,cAAc,SAAS,+BAA+B,qCACtD;;8CAEF,8OAAC,2MAAI;oCAAC,MAAM;oCAAI,aAAa,cAAc,SAAS,MAAM;;;;;;8CAC1D,8OAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;;sCAExC,8OAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,qEAAqE,EAC/E,cAAc,UAAU,+BAA+B,qCACvD;;8CAEF,8OAAC,6NAAS;oCAAC,MAAM;oCAAI,aAAa,cAAc,UAAU,MAAM;;;;;;8CAChE,8OAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;;sCAExC,8OAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,qEAAqE,EAC/E,cAAc,aAAa,+BAA+B,qCAC1D;;8CAEF,8OAAC,sNAAQ;oCAAC,MAAM;oCAAI,aAAa,cAAc,aAAa,MAAM;;;;;;8CAClE,8OAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlD"}}]
}